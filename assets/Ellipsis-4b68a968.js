import{ar as A,av as E,aw as M,bq as I,br as B,bs as D,j as $,A as T,r as h,z as j,k as w,n as H,aa as N,J as y,x as z,bd as W,a1 as q}from"./index-31d2750e.js";import{_ as J,p as V}from"./Popover-c3457f02.js";const ne=A&&"loading"in document.createElement("img"),F=(e={})=>{var s;const{root:i=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(s=e.threshold)!==null&&s!==void 0?s:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof i=="string"?document.querySelector(i):i)||document.documentElement})}},C=new WeakMap,_=new WeakMap,R=new WeakMap,oe=(e,s,i)=>{if(!e)return()=>{};const n=F(s),{root:c}=n.options;let a;const u=C.get(c);u?a=u:(a=new Map,C.set(c,a));let d,r;a.has(n.hash)?(r=a.get(n.hash),r[1].has(e)||(d=r[0],r[1].add(e),d.observe(e))):(d=new IntersectionObserver(m=>{m.forEach(g=>{if(g.isIntersecting){const b=_.get(g.target),O=R.get(g.target);b&&b(),O&&(O.value=!0)}})},n.options),d.observe(e),r=[d,new Set([e])],a.set(n.hash,r));let f=!1;const v=()=>{f||(_.delete(e),R.delete(e),f=!0,r[1].has(e)&&(r[0].unobserve(e),r[1].delete(e)),r[1].size<=0&&a.delete(n.hash),a.size||C.delete(c))};return _.set(e,v),R.set(e,i),v},G=e=>{const{borderRadius:s,boxShadow2:i,baseColor:n}=e;return Object.assign(Object.assign({},B),{borderRadius:s,boxShadow:i,color:D(n,"rgba(0, 0, 0, .85)"),textColor:n})},K=E({name:"Tooltip",common:M,peers:{Popover:I},self:G}),P=K,Q=E({name:"Ellipsis",common:M,peers:{Tooltip:P}}),U=Q,X=Object.assign(Object.assign({},V),T.props),Y=$({name:"Tooltip",props:X,__popover__:!0,setup(e){const s=T("Tooltip","-tooltip",void 0,P,e),i=h(null);return Object.assign(Object.assign({},{syncPosition(){i.value.syncPosition()},setShow(c){i.value.setShow(c)}}),{popoverRef:i,mergedTheme:s,popoverThemeOverrides:j(()=>s.value.self)})},render(){const{mergedTheme:e,internalExtraClass:s}=this;return w(J,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:s.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Z=H("ellipsis",{overflow:"hidden"},[N("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),y("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),y("cursor-pointer",`
 cursor: pointer;
 `)]);function S(e){return`${e}-ellipsis--line-clamp`}function L(e,s){return`${e}-ellipsis--cursor-${s}`}const ee=Object.assign(Object.assign({},T.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),ie=$({name:"Ellipsis",inheritAttrs:!1,props:ee,setup(e,{slots:s,attrs:i}){const{mergedClsPrefixRef:n}=z(e),c=T("Ellipsis","-ellipsis",Z,U,e,n),a=h(null),u=h(null),d=h(null),r=h(!1),f=j(()=>{const{lineClamp:t}=e,{value:o}=r;return t!==void 0?{textOverflow:"","-webkit-line-clamp":o?"":t}:{textOverflow:o?"":"ellipsis","-webkit-line-clamp":""}});function v(){let t=!1;const{value:o}=r;if(o)return!0;const{value:l}=a;if(l){const{lineClamp:p}=e;if(b(l),p!==void 0)t=l.scrollHeight<=l.offsetHeight;else{const{value:k}=u;k&&(t=k.getBoundingClientRect().width<=l.getBoundingClientRect().width)}O(l,t)}return t}const m=j(()=>e.expandTrigger==="click"?()=>{var t;const{value:o}=r;o&&((t=d.value)===null||t===void 0||t.setShow(!1)),r.value=!o}:void 0);W(()=>{var t;e.tooltip&&((t=d.value)===null||t===void 0||t.setShow(!1))});const g=()=>w("span",Object.assign({},q(i,{class:[`${n.value}-ellipsis`,e.lineClamp!==void 0?S(n.value):void 0,e.expandTrigger==="click"?L(n.value,"pointer"):void 0],style:f.value}),{ref:"triggerRef",onClick:m.value,onMouseenter:e.expandTrigger==="click"?v:void 0}),e.lineClamp?s:w("span",{ref:"triggerInnerRef"},s));function b(t){if(!t)return;const o=f.value,l=S(n.value);e.lineClamp!==void 0?x(t,l,"add"):x(t,l,"remove");for(const p in o)t.style[p]!==o[p]&&(t.style[p]=o[p])}function O(t,o){const l=L(n.value,"pointer");e.expandTrigger==="click"&&!o?x(t,l,"add"):x(t,l,"remove")}function x(t,o,l){l==="add"?t.classList.contains(o)||t.classList.add(o):t.classList.contains(o)&&t.classList.remove(o)}return{mergedTheme:c,triggerRef:a,triggerInnerRef:u,tooltipRef:d,handleClick:m,renderTrigger:g,getTooltipDisabled:v}},render(){var e;const{tooltip:s,renderTrigger:i,$slots:n}=this;if(s){const{mergedTheme:c}=this;return w(Y,Object.assign({ref:"tooltipRef",placement:"top"},s,{getDisabled:this.getTooltipDisabled,theme:c.peers.Tooltip,themeOverrides:c.peerOverrides.Tooltip}),{trigger:i,default:(e=n.tooltip)!==null&&e!==void 0?e:n.default})}else return i()}});export{Y as N,ie as _,ne as i,oe as o,P as t};
